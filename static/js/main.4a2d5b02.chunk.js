(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,n){e.exports={avatar:"ProfileInfo_avatar__n0kFH",descriptionBlock:"ProfileInfo_descriptionBlock__1W_a_",heroImage:"ProfileInfo_heroImage__28q8v"}},106:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__3orJQ",newPost:"MyPosts_newPost__3nzJ0",posts:"MyPosts_posts__3wApD"}},130:function(e,t,n){e.exports={header:"Header_header__No0Wg",loginBlock:"Header_loginBlock__2nbRJ"}},175:function(e,t,n){e.exports={item:"Post_item__2czGV"}},215:function(e,t,n){},216:function(e,t,n){},345:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(47),o=n.n(a),c=(n(215),n(40)),i=n(41),u=n(48),l=n(49),d=(n(216),n(44)),j=n.n(d),p=n(25),b=n(1),f=function(){return Object(b.jsxs)("nav",{className:j.a.nav,children:[Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/profile",activeClassName:j.a.active,children:"Profile"})}),Object(b.jsx)("div",{className:"".concat(j.a.item," ").concat(j.a.active),children:Object(b.jsx)(p.b,{to:"/dialogs",activeClassName:j.a.active,children:"Messages"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/users",children:"Users"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/news",children:"News"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/music",children:"Music"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/settings",children:"Settings"})})]})},h=n(23),g=n(21),O=n(10),m="SEND-MESSAGE",v={messagesData:[{id:1,message:"Hi!"},{id:2,message:"What's up!"},{id:3,message:"Hello!"},{id:4,message:"How are your doing?!"},{id:5,message:"Where is my money, Lebowski ?!"}],dialogsData:[{id:1,name:"Olga"},{id:2,name:"Ivan"},{id:3,name:"Irina"},{id:4,name:"John"},{id:5,name:"Andrey"}]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;if(t.type===m){var n=t.newMessageBody;return Object(O.a)(Object(O.a)({},e),{},{messagesData:[].concat(Object(g.a)(e.messagesData),[{id:6,message:n}])})}return e},w=n(52),_=n.n(w),P=function(e){return Object(b.jsx)("div",{className:_.a.dialog+" "+_.a.active,children:Object(b.jsx)(p.b,{to:"/dialogs/"+e.id,children:e.name})})},y=function(e){return Object(b.jsx)("div",{className:_.a.message,children:e.text})},S=n(164),C=n(165),I=n(16),k=n(62),N=n(380),A=n(384),E=n(383),T=["input","meta"],D=["input","meta"],U=function(e){var t=e.input,n=e.meta,s=Object(k.a)(e,T),r=n.touched&&n.error;return Object(b.jsx)("div",{children:Object(b.jsx)(N.a,Object(O.a)(Object(O.a)({error:!0,size:"small",margin:"dense",label:r&&n.error},t),s))})},F=function(e){var t=e.input,n=(e.meta,Object(k.a)(e,D)),s=r.a.useState(!1),a=Object(I.a)(s,2),o=a[0],c=a[1];return Object(b.jsx)("div",{children:Object(b.jsx)(A.a,Object(O.a)(Object(O.a)({control:Object(b.jsx)(E.a,{checked:o,onChange:function(e){return c(e.target.checked)},name:"check"}),label:"Remember me"},t),n))})},M=function(e){if(!e)return"Field is required"},z=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},L=n(66),B=n.n(L),R=n(386),G=z(100),H=Object(C.a)({form:"dialogAddMessageForm"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{component:U,validate:[M,G],name:"newMessageBody",placeholder:"enter your massage"})}),Object(b.jsx)("div",{children:Object(b.jsx)(R.a,{className:B.a.button,type:"submit",children:"Send"})})]})})),J=function(e){var t=e.messagesPage,n=t.dialogsData.map((function(e){return Object(b.jsx)(P,{name:e.name,id:e.id})})),s=t.messagesData.map((function(e){return Object(b.jsx)(y,{text:e.message})}));t.newMessageBody;return e.isAuth?Object(b.jsxs)("div",{className:_.a.dialogs,children:[Object(b.jsx)("div",{className:_.a.dialogsItem,children:n}),Object(b.jsx)("div",{className:_.a.messages,children:Object(b.jsx)("div",{children:s})}),Object(b.jsx)(H,{onSubmit:function(t){e.sendMessage(t.newMessageBody)}})]}):Object(b.jsx)(h.a,{to:"/login"})},W=n(24),V=function(e){return{isAuth:e.auth.isAuth}},X=n(19),q=Object(X.d)(Object(W.b)((function(e){return{messagesPage:e.messagesPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:m,newMessageBody:e}}(t))}}})),(function(e){var t=function(t){Object(u.a)(s,t);var n=Object(l.a)(s);function s(){return Object(c.a)(this,s),n.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return this.props.isAuth?Object(b.jsx)(e,Object(O.a)({},this.props)):Object(b.jsx)(h.a,{to:"/login"})}}]),s}(r.a.Component);return Object(W.b)(V)(t)}))(J),K=n(35),Q=n(20),Y=n.n(Q),Z=n(174).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"a1e1af33-ed96-4178-924e-0d18de8ee9bc"}}),$={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return Z.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return Z.post("follow/".concat(e))},unfollow:function(e){return Z.delete("follow/".concat(e))},getProfile:function(e){return ee.getProfile(e)}},ee={getProfile:function(e){return Z.get("profile/"+e)},getStatus:function(e){return Z.get("profile/status/"+e)},updateStatus:function(e){return Z.put("profile/status/",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),Z.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}})}},te=function(){return Z.get("auth/me")},ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Z.post("auth/login",{email:e,password:t,rememberMe:n})},se=function(){return Z.delete("auth/login")},re=function(e,t,n,s){return e.map((function(e){return e[n]===t?Object(O.a)(Object(O.a)({},e),s):e}))},ae="FOLLOW",oe="UNFOLLOW",ce="SET_USERS",ie="SET_CURRENT_PAGE",ue="SET_TOTAL_USERS_COUNT",le="TOGGLE_IS_FETCHING",de="TOGGLE_IS_FOLLOWING_PROGRESS",je={users:[],pageSize:20,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},pe=function(e){return{type:ae,userId:e}},be=function(e){return{type:oe,userId:e}},fe=function(e){return{type:ie,currentPage:e}},he=function(e){return{type:le,isFetching:e}},ge=function(e,t){return{type:de,isFetching:e,userId:t}},Oe=function(){var e=Object(K.a)(Y.a.mark((function e(t,n,s,r){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ge(!0,r)),e.next=3,n(r);case 3:0===e.sent.data.resultCode&&t(s(r)),t(ge(!1,r));case 6:case"end":return e.stop()}}),e)})));return function(t,n,s,r){return e.apply(this,arguments)}}(),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(O.a)(Object(O.a)({},e),{},{users:re(e.users,t.userId,"id",{followed:!0})});case oe:return Object(O.a)(Object(O.a)({},e),{},{users:re(e.users,t.userId,"id",{followed:!1})});case ce:return Object(O.a)(Object(O.a)({},e),{},{users:t.users});case ie:return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case ue:return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.count});case le:return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case de:return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(g.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},ve=n(70),xe=n.n(ve),we=function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,o=e.portionSize,c=void 0===o?10:o,i=Math.ceil(t/n),u=[],l=1;l<=i;l++)u.push(l);var d=Math.ceil(i/c),j=Object(s.useState)(1),p=Object(I.a)(j,2),f=p[0],h=p[1],g=(f-1)*c+1,O=f*c;return Object(b.jsxs)("div",{children:[f>1&&Object(b.jsx)("button",{onClick:function(){h(f-1)},children:"PREV"}),u.filter((function(e){return e>=g&&e<=O})).map((function(e){return Object(b.jsxs)("span",{className:r===e&&xe.a.selectedPage,onClick:function(t){a(e)},children:[" ",e," "]})})),d>f&&Object(b.jsx)("button",{onClick:function(){h(f+1)},children:"NEXT"})]})},_e=n.p+"static/media/user-icon.998e6aeb.png",Pe=["user","followingInProgress","follow","unfollow","id"],ye=function(e){var t=e.user,n=e.followingInProgress,s=e.follow,r=e.unfollow;e.id,Object(k.a)(e,Pe);return Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{children:Object(b.jsx)(p.b,{to:"/profile/"+t.id,children:Object(b.jsx)("img",{src:null!=t.photos.small?t.photos.small:_e,className:xe.a.userPhoto})})}),Object(b.jsx)("div",{children:t.followed?Object(b.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:"Unfollow"}):Object(b.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id)},children:"Follow"})})]}),Object(b.jsxs)("span",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:t.name}),Object(b.jsx)("div",{children:t.status})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:"user.location.city"}),Object(b.jsx)("div",{children:"user.location.country"})]})]})]})},Se=["currentPage","onPageChanged","totalUsersCount","pageSize","users"],Ce=function(e){var t=e.currentPage,n=e.onPageChanged,s=e.totalUsersCount,r=e.pageSize,a=e.users,o=Object(k.a)(e,Se);return Object(b.jsxs)("div",{children:[Object(b.jsx)(we,{currentPage:t,onPageChanged:n,totalItemsCount:s,pageSize:r}),a.map((function(e){return Object(b.jsx)(ye,{user:e,followingInProgress:o.followingInProgress,unfollow:o.unfollow,follow:o.follow},e.id)}))]})},Ie=n.p+"static/media/spinner-solid.b2c94047.svg",ke=function(e){return Object(b.jsx)("img",{src:Ie,className:xe.a.preloader})},Ne=function(e){return e.usersPage.users},Ae=function(e){return e.usersPage.pageSize},Ee=function(e){return e.usersPage.totalUsersCount},Te=function(e){return e.usersPage.currentPage},De=function(e){return e.usersPage.isFetching},Ue=function(e){return e.usersPage.followingInProgress},Fe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.getUsers(t,e.props.pageSize)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[this.props.isFetching?Object(b.jsx)(ke,{}):null,Object(b.jsx)(Ce,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress})]})}}]),n}(r.a.Component),Me=Object(X.d)(Object(W.b)((function(e){return{users:Ne(e),pageSize:Ae(e),totalUsersCount:Ee(e),currentPage:Te(e),isFetching:De(e),followingInProgress:Ue(e)}}),{follow:function(e){return function(){var t=Object(K.a)(Y.a.mark((function t(n){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=$.follow.bind($),Oe(n,s,pe,e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(K.a)(Y.a.mark((function t(n){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=$.unfollow.bind($),Oe(n,s,be,e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:fe,toggleFollowingInProgress:ge,getUsers:function(e,t){return function(){var n=Object(K.a)(Y.a.mark((function n(s){var r;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(he(!0)),n.next=3,$.getUsers(e,t);case 3:r=n.sent,s(he(!1)),s((o=r.items,{type:ce,users:o})),s((a=r.totalCount,{type:ue,count:a})),s(fe(e));case 8:case"end":return n.stop()}var a,o}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(Fe),ze="ADD-POST",Le="SET_USER_PROFILE",Be="SET_STATUS",Re="SAVE_PHOTO_SUCCESS",Ge={postsData:[{id:1,message:"Hi, that is my first post",likesCount:"\u2665 10 "},{id:2,message:"I was launch my spaceship",likesCount:"\u2665 15 "},{id:3,message:"Tesla is the best e-car",likesCount:"\u2665 100 "}],profile:null,status:""},He=function(e){return{type:Be,status:e}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:var n={id:5,message:t.newPostText,likesCount:"\u2665 0"};return Object(O.a)(Object(O.a)({},e),{},{postsData:[].concat(Object(g.a)(e.postsData),[n]),newPostText:""});case Le:return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});case Be:return Object(O.a)(Object(O.a)({},e),{},{status:t.status});case Re:return Object(O.a)(Object(O.a)({},e),{},{profile:Object(O.a)(Object(O.a)({},e.profile),{},{photos:t.photos})});default:return e}},We=n(105),Ve=n.n(We),Xe=function(e){var t=Object(s.useState)(!1),n=Object(I.a)(t,2),r=n[0],a=n[1],o=Object(s.useState)(e.status),c=Object(I.a)(o,2),i=c[0],u=c[1];Object(s.useEffect)((function(){u(e.status)}),[e.status]);return Object(b.jsxs)("div",{children:[!r&&Object(b.jsx)("div",{children:Object(b.jsx)("span",{onDoubleClick:function(){a(!0)},children:e.status||"Status Qo"})}),r&&Object(b.jsx)("div",{children:Object(b.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){a(!1),e.updateStatus(i)},value:i})})]})},qe=function(e){var t=e.profile,n=e.status,s=e.updateStatus,r=e.isOwner,a=e.savePhoto;if(!t)return Object(b.jsx)(ke,{});return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{className:Ve.a.heroImage,src:"http://www.wincore.ru/uploads/posts/2015-07/1435764975_img9.jpg",alt:"hero"})}),Object(b.jsxs)("div",{className:Ve.a.descriptionBlock,children:[Object(b.jsx)("img",{src:t.photos.large||_e}),r&&Object(b.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&a(e.target.files[0])}}),Object(b.jsx)("img",{className:Ve.a.avatar,src:"https://pinster.ru/cache/7c30d78b/avcd43ac08ca90bc0fb74.jpeg",alt:"cat"}),"description",Object(b.jsx)(Xe,{status:n,updateStatus:s})]})]})},Ke=n(106),Qe=n.n(Ke),Ye=n(175),Ze=n.n(Ye),$e=function(e){return Object(b.jsxs)("div",{className:Ze.a.item,children:[Object(b.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdPTZvHXqUKrFwXtWTABC_5Lt6DC1u4x2vag&usqp=CAU",alt:"avatar"}),e.message,Object(b.jsx)("div",{children:Object(b.jsx)("span",{children:e.likes})})]})},et=r.a.memo((function(e){console.log("Hello");var t=e.postsData.map((function(e){return Object(b.jsx)($e,{message:e.message,likes:e.likesCount})}));return Object(b.jsxs)("div",{className:Qe.a.postsBlock,children:[Object(b.jsxs)("div",{className:Qe.a.newPost,children:[Object(b.jsx)("h3",{children:"My post"}),Object(b.jsx)("div",{children:Object(b.jsx)(nt,{onSubmit:function(t){e.addPost(t.newPostText)}})})]}),Object(b.jsx)("div",{className:Qe.a.posts,children:t})]})})),tt=z(10),nt=Object(C.a)({form:"dialogAddPostForm"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{component:U,name:"newPostText",placeholder:"write post",validate:[M,tt]})}),Object(b.jsx)("div",{children:Object(b.jsx)(R.a,{className:B.a.button,type:"submit",children:"Add post"})})]})})),st=et,rt=Object(W.b)((function(e){return{postsData:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:ze,newPostText:e}}(t))}}}))(st),at=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(qe,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(b.jsx)(rt,{})]})},ot=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(b.jsx)(at,Object(O.a)(Object(O.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,savePhoto:this.props.savePhoto,updateStaus:this.props.updateStatus}))}}]),n}(r.a.Component),ct=Object(X.d)(Object(W.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(){var t=Object(K.a)(Y.a.mark((function t(n){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.getProfile(e);case 2:s=t.sent,n((r=s.data,{type:Le,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(K.a)(Y.a.mark((function t(n){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.getStatus(e);case 2:s=t.sent,n(He(s.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(K.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(He(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(K.a)(Y.a.mark((function t(n){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.savePhoto(e);case 2:0===(s=t.sent).data.resultCode&&n((r=s.data.data.photos,{type:Re,photos:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()}}),h.g)(ot),it=n(130),ut=n.n(it),lt=function(e){return Object(b.jsxs)("header",{className:ut.a.header,children:[Object(b.jsx)("img",{src:"https://uploads.turbologo.com/uploads/design/hq_preview_image/1020095/draw_svg20210507-22909-1scw2hm.svg.png",alt:"logo"}),Object(b.jsx)("div",{className:ut.a.loginBlock,children:e.isAuth?Object(b.jsxs)("div",{children:[e.login,Object(b.jsx)("button",{onClick:e.logout,children:"Log Out"})]}):Object(b.jsx)(p.b,{to:"/login",children:"Login"})})]})},dt=n(64),jt="SET_USER_DATA",pt={userId:null,email:null,login:null,isAuth:!1},bt=function(e,t,n,s){return{type:jt,payload:{userId:e,email:t,login:n,isAuth:s}}},ft=function(){return function(){var e=Object(K.a)(Y.a.mark((function e(t){var n,s,r,a,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:0===(n=e.sent).data.resultCode&&(s=n.data.data,r=s.id,a=s.email,o=s.login,t(bt(r,a,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;return t.type===jt?Object(O.a)(Object(O.a)({},e),t.payload):e},gt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(b.jsx)(lt,Object(O.a)({},this.props))}}]),n}(r.a.Component),Ot=Object(W.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(K.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:0===e.sent.data.resultCode&&t(bt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(gt),mt=n(382),vt=Object(C.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:t,children:[n&&Object(b.jsx)(mt.a,{variant:"filled",severity:"error",children:n}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{placeholder:"Email",name:"email",component:U,validate:[M]})}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{placeholder:"Password",type:"password",name:"password",component:U,validate:[M]})}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{name:"remember",component:F,type:"checkbox"})}),Object(b.jsx)("div",{children:Object(b.jsx)(R.a,{className:B.a.button,type:"submit",children:"Login"})})]})})})),xt=Object(W.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var s=Object(K.a)(Y.a.mark((function s(r){var a,o;return Y.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ne(e,t,n);case 2:0===(a=s.sent).data.resultCode?r(ft()):(o=a.data.messages.length>0?a.data.messages[0]:"Some error",r(Object(dt.a)("login",{_error:o})));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(b.jsx)(h.a,{to:"/profile"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsx)(vt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),wt="SET_INITIALIZED",_t={initialized:!1},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;return t.type===wt?Object(O.a)(Object(O.a)({},e),{},{initialized:!0}):e},yt={},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt;return e},Ct=n(176),It=n(166),kt=Object(X.c)({profilePage:Je,messagesPage:x,sidebar:St,usersPage:me,auth:ht,form:It.a,app:Pt}),Nt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||X.d,At=Object(X.e)(kt,Nt(Object(X.a)(Ct.a)));window._store_=At;var Et=At,Tt=n(379),Dt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(b.jsx)(p.a,{children:Object(b.jsxs)("div",{className:"app-wrapper",children:[Object(b.jsx)(Ot,{}),Object(b.jsx)(f,{}),Object(b.jsxs)("div",{className:"app-wrapper-content",children:[Object(b.jsx)(h.b,{path:"/dialogs",render:function(){return Object(b.jsx)(q,{})}}),Object(b.jsx)(h.b,{path:"/profile/:userId*",render:function(){return Object(b.jsx)(ct,{})}}),Object(b.jsx)(h.b,{path:"/users",render:function(){return Object(b.jsx)(Me,{})}}),Object(b.jsx)(h.b,{path:"/login",render:function(){return Object(b.jsx)(xt,{})}})]})]})}):Object(b.jsx)(ke,{})}}]),n}(r.a.Component),Ut=Object(W.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(ft());Promise.all([t]).then((function(){e({type:wt})}))}}})(Dt),Ft=function(e){return Object(b.jsx)(p.a,{children:Object(b.jsx)(W.a,{store:Et,children:Object(b.jsx)(Tt.a,{injectFirst:!0,children:Object(b.jsx)(Ut,{})})})})};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(Ft,{})}),document.getElementById("root"))},44:function(e,t,n){e.exports={nav:"Nav_nav__2RGLS",item:"Nav_item__2eRjL",active:"Nav_active__2g8Pu"}},52:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__38JI6",dialogsItem:"Dialogs_dialogsItem__2Y6jC",active:"Dialogs_active__VoPJ3",dialog:"Dialogs_dialog__3cCt0",messages:"Dialogs_messages__V7vpe",message:"Dialogs_message__2A9Xt"}},66:function(e,t,n){e.exports={"form-control":"FormsControl_form-control__2eGMx",error:"FormsControl_error__JBmWI",button:"FormsControl_button__2JdMs"}},70:function(e,t,n){e.exports={userPhoto:"users_userPhoto__2zXak",selectedPage:"users_selectedPage__2gV__",preloader:"users_preloader__3VEH3"}}},[[345,1,2]]]);
//# sourceMappingURL=main.4a2d5b02.chunk.js.map